<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/static/logo.png">
  <title>Hexo博客：高级配置 | FANMR.CN</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100.1vh;
      font-family: Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;
      /* background-color: #f6f6f7; */
      background-color: #fff;
      color: #4c4b52;
    }

    html {
      scroll-behavior: smooth;
    }

    /* 定义滚动条 */
    ::-webkit-scrollbar {
      width: 7px;
      height: 7px;
      border-radius: 10px;
    }

    /* 定义滚动条滑块 */
    ::-webkit-scrollbar-thumb {
      background-color: #0003;
      border-radius: 10px;
    }

    /* 滑块hover效果 */
    ::-webkit-scrollbar-thumb:hover {
      background: #B2B2B2;
    }

    a {
      text-decoration: none;
    }

    a {
      text-decoration: none;
    }

    /* 布局 */
    .container {
      width: 1380px;
      display: flex;
      margin: 0 auto;
    }

    .left {
      width: 260px;
      height: 100vh;
      padding-right: 15px;
      position: sticky;
      top: 0;
    }

    .center {
      width: 840px;
      background-color: #fff;
    }

    .right {
      width: 260px;
      height: 100vh;
      padding-left: 15px;
      position: sticky;
      top: 0;
    }

    /* 网站名称 */
    .site {
      width: 100%;
      height: 64px;
      line-height: 64px;
      border-bottom: 1px solid #dfdfe1;
    }

    .site a {
      color: #4c4b52;
      font-size: 18px;
      font-weight: bold;

    }

    .site span {
      display: inline-block;
      font-size: 13px;
      color: #999;
      margin-left: 20px;
    }

    /* 导航 */
    .nav {
      width: 100%;
      height: 64px;
      line-height: 64px;
      border-bottom: 1px solid #dfdfe1;
      text-align: right;
    }

    .nav a {
      font-size: 18px;
      display: inline-block;
      margin-left: 15px;
      position: relative;
    }

    .nav a::after {
      content: '';
      display: block;
      width: 35px;
      height: 35px;
      border: 1px solid #fff;
      border-radius: 50%;
      position: absolute;
      top: 13px;
      left: -6px;
      transition: all .25s;
    }

    .nav a:hover::after {
      border: 1px solid #dfdfe1;
    }

    /* 分类 */
    .category {
      margin-top: 15px;
      font-size: 13.5px;
      padding: 5px;
      max-height: 70vh;
      overflow: scroll;
    }

    /* 定义滚动条宽度（竖向）、高度（横向）及背景（容器） */
    .category::-webkit-scrollbar {
      width: 5px;
      height: 0;
      background-color: #fff;
      border-radius: 10px;
    }

    /* 定义滚动条轨道 */
    .category::-webkit-scrollbar-track {
      background-color: #fff;
      border-radius: 10px;
    }

    /* 定义滚动条滑块 */
    .category::-webkit-scrollbar-thumb {
      background-color: #fff;
      transition: all .2s;
      border-radius: 10px;
    }

    .category:hover::-webkit-scrollbar {
      background-color: #f5f6f7;
    }

    .category:hover::-webkit-scrollbar-thumb {
      background-color: #0003;
    }

    .category-item {
      margin: 3px 0;
      padding: 2px 0;
    }


    .category-item-text {
      color: #555;
      cursor: pointer;
      transition: all .1s;
    }

    .category-item-text span:nth-child(2) {
      float: right;
      color: #999;
    }

    .category-item-text:hover,
    .category-item-text:hover span:nth-child(2) {
      color: #ec5c30;
    }

    .category-child {
      display: none;
    }

    .category-child a {
      font-size: 13.5px;
      display: block;
      margin-left: 16px;
      color: #555;
      padding: 5px 0;
      transition: all .1s;
    }

    .category-child a:first-child {
      margin-top: 7px;
    }

    .category-child a:last-child {
      margin-bottom: 7px;
    }

    .category-child a:hover {
      color: #ec5c30;
    }

    .category-child-active {
      color: #ec5c30 !important;
    }

    /* 中间内容 */
    .content {
      padding: 20px;
      min-height: 100vh;
    }

    .content-title {
      font-size: 24px;
      font-weight: bold;
      color: #555;
      margin: 20px 0 15px 0;
      text-align: center;
    }

    .content-info {
      text-align: center;
      color: #888;
      font-size: 14px;
      margin-bottom: 20px;
    }

    .content-info span {
      margin: 0 5px;
      color: #222;
    }

    /* 大纲 */
    #outline {
      margin-top: 15px;
      padding: 3px 5px 3px 10px;
      max-height: 70vh;
      position: relative;

    }

    #ouline:hover::after {
      background-color: #c5c5c6;
    }

    /* 定义滚动条 */
    #outline::-webkit-scrollbar {
      width: 0;
    }

    #outline a {
      display: block;
      font-size: 13.5px;
      color: #4c4b52;
      padding: 3px 5px;
      margin: 2px 0;
      border-radius: 4px;
      overflow: hidden;
      white-space: nowrap;
      max-width: 100%;
      text-overflow: ellipsis;
    }

    #outline a:hover {
      color: #ec5c30;
    }

    .outline-active {
      color: #23a057 !important;
      position: relative;
      background-color: #def1e6;
    }

    .outline-2 {
      padding-left: 30px !important;
    }

    #backTop {
      cursor: pointer;
      width: 100%;
      height: 30px;
      text-align: center;
      line-height: 32px;
      font-size: 13px;
      margin-top: 10px;
    }

    #backTop:hover {
      color: #23a057;
    }

    /* 底部 */
    .footer {
      width: 1380px;
      text-align: center;
      font-size: 14px;
      margin-top: 30px;
      border-top: 1px solid #dfdfe1;
      margin-left: -270px;
      padding: 20px 0;
      background-color: #fff;
    }

    .footer a {
      color: #4c4b52;
    }



    /* 文章样式 */
    .article-content {
      line-height: 1.8;
      font-size: 16px;
    }

    /* 1级标题 */
    .article-content h1 {
      font-size: 1.4em;
      padding-top: 10px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
      line-height: 1.5;
    }

    .article-content h1:after {
      content: 'h1';
      color: rgba(0, 0, 0, .2);
      font-size: 14px;
      display: inline-block;
      margin-left: 5px;
      vertical-align: top;
    }

    /* 2级标题 */
    .article-content h2 {
      font-size: 1.2em;
      line-height: 1.5;
    }

    .article-content h2:after {
      content: 'h2';
      color: rgba(0, 0, 0, .2);
      font-size: 14px;
      display: inline-block;
      margin-left: 5px;
      vertical-align: top;
    }

    /* 引用 */
    .article-content blockquote {
      border-left: 5px solid #1a8971;
      background-color: #eff2f3;
      padding: 15px;
      margin: 10px 0;
    }

    .article-content blockquote p {
      margin: 0;
    }

    /* 图片 */
    .article-content img {
      max-width: 100%;
      display: block;
      margin: 10px auto;
      cursor: pointer;
      border: 1px solid #eee;
    }

    /* 代码 */
    .article-content code {
      line-height: 1.6;
      border-radius: 3px;
      font-size: 14px;
      font-family: Consolas, "Courier New", "Microsoft Yahei", monospace !important;
      background-color: #eff2f3;
    }

    .article-content pre {
      background: #eff2f3;
      overflow: auto;
      padding: 1em;
      line-height: 1.5 !important;
    }

    .article-content pre::-webkit-scrollbar {
      width: 0;
    }

    .article-content p code {
      background: #eff2f3;
      color: #ff7600;
      margin: 0 3px;
      display: inline-block;
      padding: 0 5px;
      font-size: 14px;
    }

    .article-content li code {
      background: #eff2f3;
      color: #ff7600;
      margin: 0 3px;
      display: inline-block;
      padding: 0 5px;
      font-size: 14px;
    }

    code span {
      font-family: Consolas, "Courier New", "Microsoft Yahei", monospace !important;
    }

    /* 表格 */
    .article-content table {
      width: 100%;
      border-right: 1px solid #EBEEF5;
      border-top: 1px solid #EBEEF5;
      border-collapse: collapse;
    }

    .article-content th,
    .article-content td {
      text-align: center;
      border-left: 1px solid #EBEEF5;
      border-bottom: 1px solid #EBEEF5;
      padding: 7px 10px !important;
    }

    .article-content th {
      font-weight: bold !important;
      background-color: #f8f8f8;
    }

    .article-content a {
      color: #34a9d8;
      text-decoration: none;
    }

    .article-content a:hover {
      color: #ff7600;
    }

    /* 代办事项 */
    .article-content input {
      position: relative;
      top: 1px;
    }

    input[type='checkbox'] {
      position: relative;
      width: 14px;
      height: 14px;
      font-size: 14px;
    }

    input[type='checkbox']::after {
      border-radius: 3px;
      position: absolute;
      top: 0;
      background-color: white;
      color: #000;
      width: 15px;
      height: 15px;
      display: inline-block;
      visibility: visible;
      padding-left: 0;
      text-align: center;
      content: ' ';
      box-sizing: border-box;
      border: 1px solid #ccc;
    }

    input[type='checkbox']:checked::before {
      content: '✓';
      font-size: 13px;
      font-weight: bold;
      color: #ff7600;
      position: absolute;
      display: inline-block;
      z-index: 10;
      top: -2px;
      left: 3px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="left">
      <div class="site"><a href="/">🥝FANMR.CN</a><span>热爱，追求</span></div>
      <div class="category"><div class="category-item"><div class="category-item-text"><span>杂文随笔</span><span>5</span></div><div class="category-child" style="display:block"><a href="/article/20230213110145.html" class="">Hexo博客：静态博客</a><a href="/article/20230214142334.html" class="">Hexo博客：Next主题</a><a href="/article/20230214142852.html" class="">Hexo博客：进阶使用</a><a href="/article/20230214142904.html" class="category-child-active">Hexo博客：高级配置</a><a href="/article/20230214171402.html" class="">基于Node的静态博客</a></div></div><div class="category-item"><div class="category-item-text"><span>前端基础</span><span>10</span></div><div class="category-child" style="display:none"><a href="/article/20230214142926.html" class="">HTML知识</a><a href="/article/20230214142938.html" class="">CSS知识</a><a href="/article/20230214142943.html" class="">JS常用知识</a><a href="/article/20230214142952.html" class="">JS格式化时间戳</a><a href="/article/20230214143001.html" class="">JS获取浏览器窗口宽高</a><a href="/article/20230214143007.html" class="">JQ常用操作</a><a href="/article/20230214143014.html" class="">JQ复制到剪切板插件</a><a href="/article/20230214143021.html" class="">Three.js基础知识</a><a href="/article/20230214143028.html" class="">TypeScript基础知识</a><a href="/article/20230309185839.html" class="">Electron</a></div></div><div class="category-item"><div class="category-item-text"><span>Vue相关</span><span>17</span></div><div class="category-child" style="display:none"><a href="/article/20230214143114.html" class="">Vite使用及扩展</a><a href="/article/20230214143120.html" class="">Vue3知识及其新特性</a><a href="/article/20230214143125.html" class="">Vue3父子组件</a><a href="/article/20230214143130.html" class="">Vue常用知识积累</a><a href="/article/20230214143135.html" class="">Vue初始化页面动画</a><a href="/article/20230214143140.html" class="">Axios表单提交</a><a href="/article/20230214143147.html" class="">Element表格</a><a href="/article/20230214143153.html" class="">Element级联下拉</a><a href="/article/20230214143159.html" class="">Element文件上传</a><a href="/article/20230214143205.html" class="">Element对话框</a><a href="/article/20230214143213.html" class="">Vue二维码解决方案</a><a href="/article/20230214143222.html" class="">Vue3中使用TinyMCE富文本</a><a href="/article/20230214143227.html" class="">NProgress加载条</a><a href="/article/20230214143234.html" class="">Vue3框架动态菜单实现</a><a href="/article/20230214143240.html" class="">Vue3使用Echarts</a><a href="/article/20230214143246.html" class="">Vue3处理Excel导入导出</a><a href="/article/20230326162835.html" class="">Uniapp</a></div></div><div class="category-item"><div class="category-item-text"><span>Java基础</span><span>17</span></div><div class="category-child" style="display:none"><a href="/article/20230214143300.html" class="">Java入门知识</a><a href="/article/20230215151103.html" class="">Java常用API</a><a href="/article/20230223141136.html" class="">Java集合</a><a href="/article/20230214143305.html" class="">Java常用知识积累</a><a href="/article/20230214143309.html" class="">Lambda表达式</a><a href="/article/20230214143430.html" class="">try-with-resource</a><a href="/article/20230214143437.html" class="">Java注解</a><a href="/article/20230214143442.html" class="">Java反射</a><a href="/article/20230214143448.html" class="">Java多线程</a><a href="/article/20230214143453.html" class="">JUC并发工具包</a><a href="/article/20230214143457.html" class="">静态代理模式</a><a href="/article/20230214143501.html" class="">动态代理模式</a><a href="/article/20230214143506.html" class="">JVM结构</a><a href="/article/20230326164410.html" class="">JVM垃圾回收器</a><a href="/article/20230214143513.html" class="">树结构数据生成工具</a><a href="/article/20230214143518.html" class="">经纬度计算工具</a><a href="/article/20230214143914.html" class="">Tomcat安装</a></div></div><div class="category-item"><div class="category-item-text"><span>SpringBoot</span><span>20</span></div><div class="category-child" style="display:none"><a href="/article/20230328161840.html" class="">Spring介绍</a><a href="/article/20230214143924.html" class="">application配置</a><a href="/article/20230214143930.html" class="">Lombok中的Builder</a><a href="/article/20230214143934.html" class="">AOP打印请求响应耗时</a><a href="/article/20230214143942.html" class="">RestTemplate</a><a href="/article/20230214143947.html" class="">SpringBoot开发中常见工具类</a><a href="/article/20230214143952.html" class="">分布式锁</a><a href="/article/20230214143957.html" class="">邮件功能</a><a href="/article/20230214144002.html" class="">定时任务</a><a href="/article/20230214144009.html" class="">异步</a><a href="/article/20230214144013.html" class="">JPA</a><a href="/article/20230214144018.html" class="">基于hutool读excel</a><a href="/article/20230214144026.html" class="">省市区三级数据来源</a><a href="/article/20230214144031.html" class="">JSR303</a><a href="/article/20230214144036.html" class="">在线预览解决方案</a><a href="/article/20230214144041.html" class="">WebSocket</a><a href="/article/20230214144046.html" class="">全局异常处理</a><a href="/article/20230319144046.html" class="">支付相关</a><a href="/article/20230326164910.html" class="">SpringDoc</a><a href="/article/20230326174228.html" class="">knife4j</a></div></div><div class="category-item"><div class="category-item-text"><span>SpringMVC</span><span>6</span></div><div class="category-child" style="display:none"><a href="/article/20230214144055.html" class="">Thymeaf</a><a href="/article/20230214144101.html" class="">跨域处理</a><a href="/article/20230214144108.html" class="">拦截器</a><a href="/article/20230214144113.html" class="">伪前后端分离</a><a href="/article/20230214144120.html" class="">基于拦截器做权限校验</a><a href="/article/20230214144125.html" class="">REST风格</a></div></div><div class="category-item"><div class="category-item-text"><span>MyBatis</span><span>5</span></div><div class="category-child" style="display:none"><a href="/article/20230214144134.html" class="">MyBatis基本使用与配置</a><a href="/article/20230214144139.html" class="">Mapper使用相关</a><a href="/article/20230214144144.html" class="">MaBatis多数据源配置</a><a href="/article/20230214144149.html" class="">MyBatisPlus</a><a href="/article/20230214144153.html" class="">基于MyBatisPlus的正向工程</a></div></div><div class="category-item"><div class="category-item-text"><span>Spring Cloud Netflix</span><span>7</span></div><div class="category-child" style="display:none"><a href="/article/20230214144200.html" class="">微服务</a><a href="/article/20230214144205.html" class="">服务的消费与提供</a><a href="/article/20230214144209.html" class="">Eureka</a><a href="/article/20230214144213.html" class="">Actuator</a><a href="/article/20230214144218.html" class="">Ribbon</a><a href="/article/20230214144223.html" class="">Feign</a><a href="/article/20230214144229.html" class="">Zuul</a></div></div><div class="category-item"><div class="category-item-text"><span>Spring Cloud Alibaba</span><span>7</span></div><div class="category-child" style="display:none"><a href="/article/20230214144237.html" class="">简介与搭建</a><a href="/article/20230214144242.html" class="">Nacos注册中心</a><a href="/article/20230214144247.html" class="">Ribbon</a><a href="/article/20230214144252.html" class="">OpenFeign</a><a href="/article/20230214144258.html" class="">Nacos配置中心</a><a href="/article/20230214144306.html" class="">Geteway</a><a href="/article/20230214144310.html" class="">Sentinel</a></div></div><div class="category-item"><div class="category-item-text"><span>Netty</span><span>1</span></div><div class="category-child" style="display:none"><a href="/article/20230214144318.html" class="">Netty入门知识</a></div></div><div class="category-item"><div class="category-item-text"><span>RocketMQ</span><span>1</span></div><div class="category-child" style="display:none"><a href="/article/20230214144323.html" class="">RocketMQ介绍与安装</a></div></div><div class="category-item"><div class="category-item-text"><span>MySQL</span><span>16</span></div><div class="category-child" style="display:none"><a href="/article/20230214144332.html" class="">MySQL基础知识</a><a href="/article/20230224103504.html" class="">MySQL多表查询</a><a href="/article/20230214144340.html" class="">MySQL常用函数及解决方案</a><a href="/article/20230214144346.html" class="">MySQL视图</a><a href="/article/20230214144351.html" class="">MySQL索引</a><a href="/article/20230214144356.html" class="">MySQL存储引擎</a><a href="/article/20230214144402.html" class="">ContOS安装MySQL</a><a href="/article/20230226101051.html" class="">SQL优化</a><a href="/article/20230226145552.html" class="">MySQL存储过程</a><a href="/article/20230226153640.html" class="">MySQL触发器</a><a href="/article/20230226154033.html" class="">MySQL锁</a><a href="/article/20230302103809.html" class="">MySQL管理相关</a><a href="/article/20230302111501.html" class="">MySQL-运维-日志</a><a href="/article/20230302112331.html" class="">MySQL-运维-主从复制</a><a href="/article/20230302122646.html" class="">MySQL-运维-分库分表及MyCat</a><a href="/article/20230302222752.html" class="">MySQL-运维-读写分离</a></div></div><div class="category-item"><div class="category-item-text"><span>Redis</span><span>7</span></div><div class="category-child" style="display:none"><a href="/article/20230214144409.html" class="">Redis介绍和安装</a><a href="/article/20230214144414.html" class="">Redis配置文件</a><a href="/article/20230214144421.html" class="">Redis持久化</a><a href="/article/20230214144425.html" class="">Redis集群</a><a href="/article/20230214144429.html" class="">Redis语法基础</a><a href="/article/20230214144434.html" class="">Redis进阶使用</a><a href="/article/20230214144439.html" class="">Redis相关问题及解决方案</a></div></div><div class="category-item"><div class="category-item-text"><span>MongoDB</span><span>8</span></div><div class="category-child" style="display:none"><a href="/article/20230214144446.html" class="">Linux安装MongoDB</a><a href="/article/20230214144452.html" class="">MongoDB基础语法</a><a href="/article/20230214144457.html" class="">MongoTemplate</a><a href="/article/20230214144501.html" class="">MongoTemplate中Update操作</a><a href="/article/20230214144509.html" class="">MongoTemplate中聚合查询</a><a href="/article/20230214144515.html" class="">MongoTemplate中日期归档示例</a><a href="/article/20230214144521.html" class="">MongoTemplate使用相关知识归纳</a><a href="/article/20230214144525.html" class="">地理位置存储与距离查询</a></div></div><div class="category-item"><div class="category-item-text"><span>Linux相关</span><span>7</span></div><div class="category-child" style="display:none"><a href="/article/20230214144537.html" class="">Linux常用命令</a><a href="/article/20230214144546.html" class="">Jar启动脚本</a><a href="/article/20230214144550.html" class="">VirtualBox安装CentOS</a><a href="/article/20230214144556.html" class="">CentOS安装Node</a><a href="/article/20230214144601.html" class="">CentOS中的防火墙</a><a href="/article/20230214144607.html" class="">ArchLinux系统安装</a><a href="/article/20230214144612.html" class="">ArchLinux系统使用</a></div></div><div class="category-item"><div class="category-item-text"><span>工具合集</span><span>13</span></div><div class="category-child" style="display:none"><a href="/article/20230214144620.html" class="">IDEA</a><a href="/article/20230214144625.html" class="">Maven介绍</a><a href="/article/20230303154310.html" class="">Maven安装</a><a href="/article/20230214144630.html" class="">Gradle</a><a href="/article/20230214144635.html" class="">Git</a><a href="/article/20230214144532.html" class="">H2数据库</a><a href="/article/20230214144646.html" class="">Nginx安装</a><a href="/article/20230214144650.html" class="">Nginx配置</a><a href="/article/20230214144656.html" class="">VSCode编辑器</a><a href="/article/20230214144701.html" class="">JMeter压测</a><a href="/article/20230214144707.html" class="">smart-doc文档</a><a href="/article/20230214144712.html" class="">Docker</a><a href="/article/20230214144717.html" class="">抓包工具Charles</a></div></div><div class="category-item"><div class="category-item-text"><span>面试题</span><span>6</span></div><div class="category-child" style="display:none"><a href="/article/20230312102225.html" class="">Java基础</a><a href="/article/20230326162650.html" class="">Java集合</a><a href="/article/20230326162733.html" class="">Java多线程</a><a href="/article/20230326162756.html" class="">JVM</a><a href="/article/20230327214859.html" class="">Spring</a><a href="/article/20230328135936.html" class="">计算机网络</a></div></div></div>
    </div>
    <div class="center">
      <div class="content">
        <div class="content-title">Hexo博客：高级配置</div>
        <div class="content-info">
          <span>📚杂文随笔</span>
          <span>⏱2023/02/14</span>
          
        </div>
        <div class="article-content" id="content"><h1 id="修改node_modules方式">修改node_modules方式</h1>
<p>在使用过程中如果出现了修改node_modules包下文件的情况，对于本地使用没有影响，但是再次安装时（npm install），node_modules下的文件都会恢复到安装时的样子，对于这种情况需要使用包管理工具解决</p>
<p><strong>第一步</strong>：安装工具包</p>
<pre><code>npm i patch-package
</code></pre>
<p><strong>第二步</strong>：调整<code>package.json</code>，在<code>script</code>中加入</p>
<pre><code>&quot;postinstall&quot;: &quot;patch-package&quot;
</code></pre>
<!-- more -->

<p><strong>第三步</strong>：修改node_modules下的文件</p>
<p><strong>第四步</strong>：使用工具生成补丁</p>
<pre><code>npx patch-package 包名
如：npx patch-package hexo-generator-category
</code></pre>
<p>然后记得把生成的<code>patches</code>目录一起提交即可，下次执行<code>npm install</code>时，工具会自动执行<code>npm run postinstall</code>这个命令，将<code>patches</code>目录下的补丁打到node_modules下<br>之后的node_modules下文件修改后记得执行生成补丁命令即可</p>
<h1 id="自定义代办事项样式">自定义代办事项样式</h1>
<p>代办事项语法：</p>
<pre><code class="language-markdown"># 博客相关代办事项

* [x] 部署到Github
* [x] 自定义代办列表样式（去掉小黑点，重新加方框样式）
* [ ] 美化浏览器滚动条（第三方插件）
* [ ] 测试加密方式是否安全（能否从页面获取到所有内容）
* [ ] 迁移所有网站文章
* [ ] 固定彩带背景
</code></pre>
<p><img src="/images/20230202231818.png" alt="图" width="400"></p>
<p>浏览器默认的样式前面会多个小黑点，同时方框在不同的浏览器样式不一致，可以美化一下，首先在样式文件中加入美化的样式代码<br>文件位置：<code>next/source/css/main.styl</code></p>
<pre><code class="language-css">/* 代办事项 */
input {
  position: relative;
  top: 1px;
}
input[type=&#39;checkbox&#39;] {
  position: relative;
  width: 14px;
  height: 14px;
  font-size: 14px;
  margin-right: 5px;
}
/* 遮住原有 */
input[type=&#39;checkbox&#39;]::after {
  border-radius: 3px;
  position: absolute;
  top: 0;
  background-color: white;
  color: #000;
  width: 15px;
  height: 15px;
  display: inline-block;
  padding-left: 0;
  text-align: center;
  content: &#39; &#39;;
  box-sizing: border-box;
  border: 1px solid #ccc;
}
/* 已完成样式 */
input[type=&#39;checkbox&#39;]:checked::before {
  content: &#39;✓&#39;;
  font-size: 13px;
  font-weight: bold;
  color: #ff7600;
  position: absolute;
  display: inline-block;
  z-index: 10;
  top: 0;
  left: 3px;
}
</code></pre>
<p>然后在<code>next/layout/_layout.njk</code>文件中body结束前加入去掉小黑点的代码</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot;&gt;
  // 代办事项样式
  $(&quot;input[type=&#39;checkbox&#39;]&quot;).parents(&quot;li&quot;).css({&quot;list-style-type&quot;: &quot;none&quot;, &quot;margin-left&quot;: &quot;-21px&quot;})
&lt;/script&gt;
</code></pre>
<p><strong>注意</strong>：开启异步加载后，小黑点去除不彻底，仅页面刷新会有效果，而pjax刷新的内容无法执行该代码，解决办法是让pjax执行时再次执行该代码，将上面的代码改为</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot; data-pjax&gt;
  // 代办事项样式
  deleteTODO()
  // 使用函数方式包裹代码是防止再次执行时出现变量冲突问题
  function deleteTODO() {
    $(&quot;input[type=&#39;checkbox&#39;]&quot;).parents(&quot;li&quot;).css({ &quot;list-style-type&quot;: &quot;none&quot;, &quot;margin-left&quot;: &quot;-21px&quot; })
  }
&lt;/script&gt;
</code></pre>
<h1 id="更改分类中文章排序方式">更改分类中文章排序方式</h1>
<p>梳理了一下各个页面的排序方式，发现分类中的文章是按照时间倒序展示，有点别扭，感觉调整为时间正序排序比较好。调整方式：编辑<code>node_modules/hexo-generator-category/lib/generator.js</code>，将<code>-date</code>改为<code>date</code>即可</p>
<h1 id="自动分类插件">自动分类插件</h1>
<p>文章多了发现手动维护分类是一个麻烦的事情，一旦碰到更改分类名的情况更是头痛，偶然发现一个自动分类插件，根据文件的文件夹进行分类名的维护，支持多级分类（即多级文件夹）<br>地址：<a href="https://github.com/xu-song/hexo-auto-category">https://github.com/xu-song/hexo-auto-category</a></p>
<pre><code>npm install hexo-auto-category
</code></pre>
<p>在站点根目录下的<code>_config.yml</code>添加</p>
<pre><code class="language-yml">auto_category:
 enable: true
 # 可指定目录深度
 depth:
</code></pre>
<p><strong>注意</strong>：该插件在<code>hexo s</code>运行的情况下直接重命名文件夹偶尔会出问题，严重可能文章内容丢失！可能原因是Hexo会去维护所有的文章文件，这个时候偶尔会出现文件已存在的异常，而此时执行该自动分类插件的代码时，其中文章数据的内容是空的，而插件作者没有做这种情况的处理，直接进行了文件内容写入，导致文件内容直接丢失</p>
<h1 id="自动分类插件的修复及升级">自动分类插件的修复及升级</h1>
<p>基于以上问题进行了修复和升级，实现了以下功能</p>
<ul>
<li>自动维护分类（保留多级分类）</li>
<li>自动维护文章名</li>
<li>自动维护排序</li>
</ul>
<p>例如这是我的结构目录，有顺序的文章管理，有逻辑和层次性，而不是编辑器中根据文件名随意放置，而博客页面按照时间进行排序</p>
<p><img src="/images/20230203143521.png" alt="图" width="220"></p>
<p>然后需要实现的是文章中的标题根据文件名自动更改，而分类中的排序不再根据时间排序，而是我指定的排序方式，这样文章的排序更加有逻辑性，也更好插入新的文章进行排序</p>
<p><img src="/images/20230202231858.png" alt="图" width="520"></p>
<p>在安装的插件<code>hexo-auto-category</code>中进行更改，目录为：<code>node_modules/hexo-auto-category/</code><br>将<code>lib/logic.js</code>的内容更改为以下内容</p>
<pre><code class="language-js">&#39;use strict&#39;;

var front = require(&#39;hexo-front-matter&#39;);
var fs = require(&#39;hexo-fs&#39;);
debugger;
let logic = function (data) {
    var log = this.log;

    if (data.layout != &#39;post&#39;)
        return data;
    if (!this.config.render_drafts &amp;&amp; data.source.startsWith(&quot;_drafts/&quot;))
        return data;
    // 修复更改文件夹后没有内容会空写入情况（文章内容会丢失问题）
    if (data.content.length == 0)
        return data

    let postStr;
    var tmpPost = front.parse(data.raw);
    var categories = data.source.split(&#39;/&#39;);
    var depth = categories.length - 2;
    if (depth == 0) {
        return data;
    }
    var newCategories = categories.slice(1, 1 + Math.min(depth, categories.length - 2));
    let postCategories
    if (tmpPost.categories) {
        postCategories = tmpPost.categories;
        if (typeof (tmpPost.categories) === &quot;object&quot;) {
            postCategories = tmpPost.categories.join(&quot;_&quot;);
        }
    }
    // 设置新的分类
    tmpPost.categories = newCategories

    // 自定义排序
    var titleStr = categories[categories.length - 1]
    var titleAndSort = titleStr.split(&#39;_&#39;)
    var title = titleAndSort[1].replace(&#39;.md&#39;, &#39;&#39;)
    var sort = parseInt(titleAndSort[0])

    if (postCategories == newCategories.join(&quot;_&quot;) &amp;&amp; tmpPost.title == title &amp;&amp; tmpPost.sort == sort) {
        return data;
    }

    // 设置标题
    tmpPost.title = title
    // 设置排序号
    tmpPost.sort = sort

    postStr = front.stringify(tmpPost);
    postStr = &#39;---\n&#39; + postStr;
    fs.writeFile(data.full_source, postStr, &#39;utf-8&#39;);
    log.i(&quot;自动维护文章: %s&quot;, title);
    return data
}

module.exports = logic;
</code></pre>
<p>更改后，配置文件中不用再指定开启也不会报错，保存文章也会自动更新，但是文章的名称前需要指定排序的数字，即<code>_</code>不能缺少</p>
<p>然后更改分类中的文章排序方式，编辑<code>node_modules/hexo-generator-category/lib/generator.js</code>，将<code>-date</code>改为<code>sort</code>即可。这样更改后就能更加专注于文章，减少文章头部的维护</p>
<p><strong>注意</strong>：在使用中发现VsCode文件夹排序有问题，两个并列的<code>Ⅰ</code>和<code>Ⅱ</code>开头的文件夹，<code>Ⅱ</code>居然在上面，是由VsCode的排序问题造成的，需要对VsCode进行配置</p>
<p><img src="/images/20230202231915.png" alt="图" width="300"></p>
<p>但是又出现了新的问题，数字<code>10</code>会在<code>1</code>之前，我这里的解决办法是将排序号的数字从<code>101</code>开始</p>
<h1 id="自动分类后页面调整">自动分类后页面调整</h1>
<p>按照上面的方式调整后，页面的展示有了更强的顺序逻辑性，但是发现在分类和文章头部出现了很多不必要的数字，其实对于展示还是不够美观的</p>
<p><img src="/images/20230203175213.png" alt="图" width="180"></p>
<p>所以需要针对多出来的数字进行处理。<br>首先对于文章头部的分类，由于无法直接操作到分类的文字，全局查阅性能不高，于是给它加个class便于操作<br>编辑<code>next/layout/_partials/post/post-meta.njk</code>，将下面的代码中加入新的class，取名<code>category-head-item</code></p>
<pre><code class="language-html">&lt;span itemprop=&quot;about&quot; itemscope itemtype=&quot;http://schema.org/Thing&quot;&gt;
  &lt;a href=&quot;{{ url_for(cat.path) }}&quot; itemprop=&quot;url&quot; rel=&quot;index&quot;&gt;&lt;span class=&quot;category-head-item&quot; itemprop=&quot;name&quot;&gt;{{ cat.name }}&lt;/span&gt;&lt;/a&gt;
&lt;/span&gt;
</code></pre>
<p>然后在<code>next/layout/_layout.njk</code>中加入处理代码，与代办事项同理，如果使用了异步加载，需要加上<code>data-pjax</code>让pjax再次执行</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot; data-pjax&gt;
  // 去除分类名前的序号
  deleteSort()
  function deleteSort() {
    // 文章头部分类
    let allItem1 = $(&#39;.main&#39;).find(&#39;.category-head-item&#39;)
    for (item of allItem1) {
        $(item).html($(item).text().replace(/[1|2|3|4|5|6|7|8|9][0|1|2|3|4|5|6|7|8|9]_/g, &#39;&#39;))
    }
    // 分类页面中
    let allItem2 = $(&#39;.main&#39;).find(&#39;.category-list-link&#39;)
    for (item of allItem2) {
        $(item).html($(item).text().replace(/[1|2|3|4|5|6|7|8|9][0|1|2|3|4|5|6|7|8|9]_/g, &#39;&#39;))
    }
    // xxx分类下文章页
    let allItem3 = $(&#39;.main&#39;).find(&#39;.collection-header&#39;)
    for (item of allItem3) {
        $(item).html($(item).text().replace(/[1|2|3|4|5|6|7|8|9][0|1|2|3|4|5|6|7|8|9]_/g, &#39;&#39;))
    }
  }
&lt;/script&gt;
</code></pre>
<p>正则可以根据自己的习惯做调整进行匹配。调整后的效果</p>
<p><img src="/images/20230202231944.png" alt="图" width="170"></p>
<p><img src="/images/20230202231957.png" alt="图" width="500"></p>
<h1 id="侧边标签改运行天数">侧边标签改运行天数</h1>
<p>因为使用不到标签，同时不想为文章加标签，也从来没有通过标签查找过文章，所以将侧边标签改为了运行天数展示</p>
<p><img src="/images/20230203150322.png" alt="图" width="200"></p>
<p>首先将文件<code>next/layout/_partials/sidebar/site-overview.njk</code>中的以下代码：</p>
<pre><code class="language-html">{%- if site.tags.length &gt; 0 %}
  {%- set tagsPageQuery = site.pages.find({type: &#39;tags&#39;}, {lean: true}) %}
  {%- set hasTagsPage = tagsPageQuery.length &gt; 0 %}
  &lt;div class=&quot;site-state-item site-state-tags&quot;&gt;
    {%- set tag_dir = theme.menu.tags.split(&#39;||&#39;)[0] | trim if theme.menu.tags else config.tag_dir + &#39;/&#39; %}
    {%- if hasTagsPage %}
      &lt;a href=&quot;{{ url_for(tag_dir) }}&quot;&gt;
    {%- endif %}
    &lt;span class=&quot;site-state-item-count&quot;&gt;{{ site.tags.length }}&lt;/span&gt;
    &lt;span class=&quot;site-state-item-name&quot;&gt;{{ __(&#39;state.tags&#39;) }}&lt;/span&gt;
    {%- if hasTagsPage %}&lt;/a&gt;{% endif %}
  &lt;/div&gt;
{%- endif %}
</code></pre>
<p>替换为：</p>
<pre><code class="language-html">&lt;div class=&quot;site-state-item site-state-tags&quot;&gt;
  &lt;span class=&quot;site-state-item-count run-days&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;site-state-item-name&quot;&gt;运行&lt;/span&gt;
&lt;/div&gt;
</code></pre>
<p>然后在文件<code>next/layout/_layout.njk</code>中body结束前加上以下代码：</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot;&gt;
  // 运行时长
  let timer = new Date().getTime() - 1673830800000 // 开始时间戳
  $(&#39;.run-days&#39;).html(parseInt(timer / 1000 / 60 / 60 / 24))
&lt;/script&gt;
</code></pre>
<h1 id="canvas-nest">canvas-nest</h1>
<p>网页背景效果，地址：<a href="https://github.com/hustcc/canvas-nest.js">https://github.com/hustcc/canvas-nest.js</a><br>添加方式是在文件<code>next/layout/_layout.njk</code>中body结束前加上以下代码：</p>
<pre><code class="language-html">&lt;script src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<h1 id="vscode文章头自动生成">VsCode文章头自动生成</h1>
<p>使用到的是VsCode的用户代码片段，<code>设置</code> -&gt; <code>用户代码片段</code>，找到Markdown文件的配置，在其中添加以下配置：</p>
<pre><code class="language-json">&quot;header info&quot;: {
    &quot;prefix&quot;: &quot;info&quot;,
    &quot;body&quot;: [
      &quot;---&quot;,
      &quot;title: xxx&quot;,
      &quot;categories:&quot;,
      &quot;  - xx&quot;,
      &quot;  - xx&quot;,
      &quot;sort: 1&quot;,
      &quot;date: ${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE} ${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}&quot;,
      &quot;updated: ${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE} ${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}&quot;,
      &quot;---&quot;,
      &quot;&quot;,
            &quot;&quot;
    ],
    &quot;description&quot;: &quot;hexo post header info template&quot;
}
</code></pre>
<p><strong>注意</strong>：此时是无法使用的，即便配置的是全局的代码片段，对Markdown文件也是无效的，需要配置VsCode，在设置中搜索<code>markdown</code>找到某处可以点击<code>在 seetings.json 中编辑</code>进入文件，或者直接在硬盘上搜索<code>C:\Users\Administrator\AppData\Roaming\Code\User\settings.json</code>文件，在其中加入以下配置：</p>
<pre><code class="language-json">&quot;[markdown]&quot;: {
    &quot;editor.quickSuggestions&quot;: {
        &quot;other&quot;: &quot;on&quot;,
        &quot;comments&quot;: &quot;on&quot;,
        &quot;strings&quot;: &quot;on&quot;
    }
}
</code></pre>
<p>然后在头部打<code>info</code>即会出现提示，配合上面升级的自动分类插件，即可不用管文章头部的任何配置</p>
<p><img src="/images/20230204151144.gif" alt="图" width="400"></p>
<p>同理可以加段<code>more</code>的代码片段</p>
<pre><code class="language-json">&quot;post more split&quot;: {
    &quot;prefix&quot;: &quot;more&quot;,
    &quot;body&quot;: [
  &quot;&lt;!-- more --&gt;&quot;
    ],
    &quot;description&quot;: &quot;post more split template&quot;
},
</code></pre>
</div>
      </div>
      <div class="footer">
        <a href="https://beian.miit.gov.cn" target="_blank">黔ICP备2021005697号</a> © COPYRIGHT 2022 FANMR.CN
      </div>
    </div>
    <div class="right">
      <div class="nav">
        <a href="/" title="首页">🏡</a>
        <a href="/navigation.html" title="导航">🚴‍♂️</a>
        <a href="/about.html" title="作者">👨‍🌾</a>
        <a href="https://github.com/fanmore" target="_blank" title="Github">🐞</a>
        <a href="https://gitee.com/riskfan" target="_blank" title="Gitee">🎃</a>
      </div>

      <div id="outline"><a href="#修改node_modules方式" id="outline-修改node_modules方式" class="">修改node_modules方式</a><a href="#自定义代办事项样式" id="outline-自定义代办事项样式" class="">自定义代办事项样式</a><a href="#更改分类中文章排序方式" id="outline-更改分类中文章排序方式" class="">更改分类中文章排序方式</a><a href="#自动分类插件" id="outline-自动分类插件" class="">自动分类插件</a><a href="#自动分类插件的修复及升级" id="outline-自动分类插件的修复及升级" class="">自动分类插件的修复及升级</a><a href="#自动分类后页面调整" id="outline-自动分类后页面调整" class="">自动分类后页面调整</a><a href="#侧边标签改运行天数" id="outline-侧边标签改运行天数" class="">侧边标签改运行天数</a><a href="#canvas-nest" id="outline-canvas-nest" class="">canvas-nest</a><a href="#vscode文章头自动生成" id="outline-vscode文章头自动生成" class="">VsCode文章头自动生成</a></div>
      <div id="backTop" onclick="backTop()"></div>
    </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <!-- 图片预览 -->
  <link rel="stylesheet" href="/static/viewer.min.css">
  <script src="/static/viewer.min.js"></script>
  <script>
    $(document).ready(function () {
      // 分类点击
      $(".category-item-text").click(function () {
        let item = $(this).parent().find('.category-child')
        let allItem = $('.category').find('.category-child')
        for (const iterator of allItem) {
          if (item.is(iterator)) {
            if ($(item).css('display') == 'none') {
              $(item).slideDown();
            } else {
              $(item).slideUp();
            }
          } else {
            $(iterator).slideUp()
          }
        }
      });

      // 获取文章目录
      let outline = $('#content').find('h1, h2')
      let outlineId = []
      for (let item of outline) {
        outlineId.push($(item).attr('id'))
      }
      // 滚动监听
      $(document).scroll(function () {
        // 大纲激活项
        outlineActive()

        // 计算页面滚动比列
        // 获取窗口高度
        let bodyHeight = $(document).height()
        // 获取窗口高度
        let winHeight = 0
        if (window.innerHeight) {
          winHeight = window.innerHeight
        } else if ((document.body) && (document.body.clientHeight)) {
          winHeight = document.body.clientHeight
        }
        // 获取窗口宽度
        let winWidth = 0
        if (window.innerWidth) {
          winWidth = window.innerWidth
        } else if ((document.body) && (document.body.clientWidth)) {
          winWidth = document.body.clientWidth
        }
        let scrollRatio = Math.min(parseInt((top / (bodyHeight - winHeight)) * 100) + 1, 100)
        $('#backTop').html('<svg width="13px" height="13px" style="top:1px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 244l144-144l144 144"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M256 120v292"></path></svg> ' + scrollRatio + '%')
        if (top > 50 && winWidth > 1100) {
          $('#backTop').css({ 'display': 'block' })
        } else {
          $('#backTop').css({ 'display': 'none' })
        }
      })

      // 大纲激活项
      outlineActive()

      // 大纲激活项
      function outlineActive() {
        let top = $(document).scrollTop();
        if (top < 140) {
          $('#outline-' + outlineId[0]).addClass('outline-active')
        } else {
          for (let i = 0; i < outlineId.length; i++) {
            // 是最后一个或后一个之前
            if (top > $('#' + outlineId[i]).offset().top - 1 && (i === outlineId.length - 1 || top < $('#' + outlineId[i + 1]).offset().top - 1)) {
              $('#outline-' + outlineId[i]).addClass('outline-active')
            } else {
              $('#outline-' + outlineId[i]).removeClass('outline-active')
            }
          }
        }
      }
    });

    // 返回顶部
    function backTop() {
      document.body.scrollTop = 0
      document.documentElement.scrollTop = 0
    }

    // 代办事项样式
    $("input[type='checkbox']").parents("li").css({ "list-style-type": "none", "margin-left": "-23px" })

    // 链接新窗口打开
    $('#content').on('click', 'a', function (e) {
      e.target.target = '_blank'
    })

    // 图片放大
    new Viewer(document.getElementById('content'))
  </script>
</body>

</html>